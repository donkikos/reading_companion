services:
  app:
    image: epub_ai_reader_ralph_app

  codex:
    build:
      context: .
      dockerfile: Dockerfile.codex1
    image: epub_ai_reader_ralph_codex
    working_dir: /app
    init: true
    user: "pwuser"
    environment:
      CODEX_HOME: /codex
      QDRANT_HOST: qdrant
      OLLAMA_BASE_URL: http://ollama:11434
    volumes:
      - ./:/app
      - ./.codex_container:/codex
      - ./skills:/codex/skills
    stdin_open: true
    tty: true
