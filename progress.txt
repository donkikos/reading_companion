## Codebase Patterns
- Skip EPUB navigation docs like `nav.xhtml` when building sentence streams from the spine.

## 2026-01-13 18:56 - US-001
- What was implemented: Added deterministic sentence stream builder with contiguous IDs and nav skipping; ingestion now uses it and added tests.
- Files changed: ingest.py, main.py, tests/test_sentence_stream.py, prd.json
- Testing: ruff format ingest.py main.py tests/test_sentence_stream.py; ruff check .; pytest
- **Learnings for future iterations:** The EPUB spine includes nav documents that should be excluded from indexing to keep sentences clean.
---
## 2026-01-13 18:57 - US-002
- What was implemented: Added fixed-window chunk builder with 8-sentence window and 2-sentence overlap, plus coverage tests.
- Files changed: ingest.py, tests/test_chunks.py, prd.json
- Testing: ruff format ingest.py tests/test_chunks.py; ruff check .; pytest
- **Learnings for future iterations:** Fixed-window chunking uses sentence indices to preserve deterministic [pos_start..pos_end] ranges.
---
